<!DOCTYPE html>
<html lang="en" ng-app="testApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngularJS Components Test - 100xBot</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #dd0031; border-bottom: 3px solid #dd0031; padding-bottom: 10px; }
        h2 { color: #555; margin-top: 40px; border-left: 4px solid #dd0031; padding-left: 10px; }
        section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .component-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 15px 0;
        }
        .component {
            flex: 1;
            min-width: 280px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #444;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #dd0031;
            box-shadow: 0 0 0 3px rgba(221, 0, 49, 0.2);
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            background: #dd0031;
            color: white;
        }
        button:hover { background: #c3002f; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .event-log {
            background: #1e1e1e;
            color: #dd0031;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            height: 100px;
            overflow-y: auto;
            border-radius: 4px;
            margin-top: 10px;
        }
        .state-display {
            background: #1a1a2e;
            color: #dd0031;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin-top: 10px;
        }
        .error { color: #ff6b6b; font-size: 12px; margin-top: 5px; }
        .success { color: #51cf66; }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin: 5px 0;
        }
        .checkbox-label input { width: auto; }
        input.ng-invalid.ng-touched {
            border-color: #ff6b6b;
        }
        .info-box {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body ng-controller="MainController">
    <h1>AngularJS Components Test Page</h1>
    <p>Test page for AngularJS two-way data binding with ng-model.</p>

    <div class="info-box">
        <strong>Note:</strong> This page uses AngularJS 1.8 (the classic Angular).
        Angular 2+ requires a build step and cannot be loaded via CDN.
        The ng-model patterns here are similar to modern Angular's template-driven forms.
    </div>

    <!-- Event Log -->
    <section>
        <h2>Event Log</h2>
        <div class="event-log">
            <div ng-repeat="log in logs track by $index">{{log}}</div>
        </div>
        <button ng-click="clearLogs()">Clear Log</button>
    </section>

    <!-- Basic ng-model -->
    <section>
        <h2>1. Basic ng-model Binding</h2>
        <div class="component-row">
            <div class="component">
                <label>Text Input</label>
                <input type="text"
                       ng-model="basicValue"
                       ng-change="onBasicChange()"
                       placeholder="Type here..."
                       data-testid="ngmodel-basic">
                <div class="state-display">State: "{{basicValue}}"</div>
            </div>
            <div class="component">
                <label>With ng-trim (default: true)</label>
                <input type="text"
                       ng-model="trimmedValue"
                       ng-change="onTrimChange()"
                       placeholder="Whitespace trimmed..."
                       data-testid="ngmodel-trim">
                <div class="state-display">State: "{{trimmedValue}}"</div>
            </div>
            <div class="component">
                <label>ng-trim="false"</label>
                <input type="text"
                       ng-model="untrimmedValue"
                       ng-trim="false"
                       ng-change="onUntrimChange()"
                       placeholder="Preserves whitespace..."
                       data-testid="ngmodel-notrim">
                <div class="state-display">State: "{{untrimmedValue}}" (length: {{untrimmedValue.length}})</div>
            </div>
        </div>
    </section>

    <!-- Validation -->
    <section>
        <h2>2. Form Validation</h2>
        <form name="validationForm" novalidate>
            <div class="component-row">
                <div class="component">
                    <label>Required Field</label>
                    <input type="text"
                           name="requiredField"
                           ng-model="requiredValue"
                           ng-change="onRequiredChange()"
                           required
                           ng-minlength="3"
                           placeholder="Min 3 characters..."
                           data-testid="ngmodel-required">
                    <div class="error" ng-show="validationForm.requiredField.$touched && validationForm.requiredField.$invalid">
                        <span ng-show="validationForm.requiredField.$error.required">Required</span>
                        <span ng-show="validationForm.requiredField.$error.minlength">Min 3 characters</span>
                    </div>
                    <div class="state-display">Valid: {{validationForm.requiredField.$valid}}</div>
                </div>
                <div class="component">
                    <label>Email Validation</label>
                    <input type="email"
                           name="emailField"
                           ng-model="emailValue"
                           ng-change="onEmailChange()"
                           required
                           placeholder="email@example.com"
                           data-testid="ngmodel-email">
                    <div class="error" ng-show="validationForm.emailField.$touched && validationForm.emailField.$invalid">
                        <span ng-show="validationForm.emailField.$error.required">Required</span>
                        <span ng-show="validationForm.emailField.$error.email">Invalid email</span>
                    </div>
                    <div class="state-display">Valid: {{validationForm.emailField.$valid}}</div>
                </div>
                <div class="component">
                    <label>Pattern (alphanumeric only)</label>
                    <input type="text"
                           name="patternField"
                           ng-model="patternValue"
                           ng-change="onPatternChange()"
                           ng-pattern="/^[a-zA-Z0-9]+$/"
                           placeholder="Letters and numbers..."
                           data-testid="ngmodel-pattern">
                    <div class="error" ng-show="validationForm.patternField.$touched && validationForm.patternField.$error.pattern">
                        Alphanumeric characters only
                    </div>
                    <div class="state-display">Valid: {{validationForm.patternField.$valid}}</div>
                </div>
            </div>
        </form>
    </section>

    <!-- Textarea & Select -->
    <section>
        <h2>3. Textarea & Select</h2>
        <div class="component-row">
            <div class="component">
                <label>Textarea ({{textareaValue.length}}/200)</label>
                <textarea ng-model="textareaValue"
                          ng-change="onTextareaChange()"
                          ng-maxlength="200"
                          rows="4"
                          placeholder="Enter text..."
                          data-testid="ngmodel-textarea"></textarea>
            </div>
            <div class="component">
                <label>Select</label>
                <select ng-model="selectedValue"
                        ng-change="onSelectChange()"
                        data-testid="ngmodel-select">
                    <option value="">-- Choose --</option>
                    <option value="angular">Angular</option>
                    <option value="react">React</option>
                    <option value="vue">Vue</option>
                </select>
                <div class="state-display">Selected: "{{selectedValue}}"</div>
            </div>
            <div class="component">
                <label>Select with ng-options</label>
                <select ng-model="selectedFramework"
                        ng-options="f.value as f.label for f in frameworks"
                        ng-change="onFrameworkChange()"
                        data-testid="ngmodel-ngoptions">
                    <option value="">-- Choose Framework --</option>
                </select>
                <div class="state-display">Selected: "{{selectedFramework}}"</div>
            </div>
        </div>
    </section>

    <!-- Checkboxes & Radio -->
    <section>
        <h2>4. Checkboxes & Radio Buttons</h2>
        <div class="component-row">
            <div class="component">
                <label>Checkboxes</label>
                <label class="checkbox-label">
                    <input type="checkbox"
                           ng-model="checkboxes.option1"
                           ng-change="onCheckboxChange('option1')"
                           data-testid="checkbox-1"> Option 1
                </label>
                <label class="checkbox-label">
                    <input type="checkbox"
                           ng-model="checkboxes.option2"
                           ng-change="onCheckboxChange('option2')"
                           data-testid="checkbox-2"> Option 2
                </label>
                <label class="checkbox-label">
                    <input type="checkbox"
                           ng-model="checkboxes.option3"
                           ng-change="onCheckboxChange('option3')"
                           data-testid="checkbox-3"> Option 3
                </label>
                <div class="state-display">State: {{checkboxes | json}}</div>
            </div>
            <div class="component">
                <label>Radio Buttons</label>
                <label class="checkbox-label">
                    <input type="radio"
                           ng-model="radioValue"
                           value="small"
                           ng-change="onRadioChange()"
                           data-testid="radio-small"> Small
                </label>
                <label class="checkbox-label">
                    <input type="radio"
                           ng-model="radioValue"
                           value="medium"
                           ng-change="onRadioChange()"
                           data-testid="radio-medium"> Medium
                </label>
                <label class="checkbox-label">
                    <input type="radio"
                           ng-model="radioValue"
                           value="large"
                           ng-change="onRadioChange()"
                           data-testid="radio-large"> Large
                </label>
                <div class="state-display">Selected: "{{radioValue}}"</div>
            </div>
            <div class="component">
                <label>Checkbox with ng-true-value/ng-false-value</label>
                <label class="checkbox-label">
                    <input type="checkbox"
                           ng-model="customCheckbox"
                           ng-true-value="'YES'"
                           ng-false-value="'NO'"
                           ng-change="onCustomCheckboxChange()"
                           data-testid="checkbox-custom"> Agree to terms
                </label>
                <div class="state-display">Value: "{{customCheckbox}}"</div>
            </div>
        </div>
    </section>

    <!-- Number & Range -->
    <section>
        <h2>5. Number & Range</h2>
        <div class="component-row">
            <div class="component">
                <label>Number Input</label>
                <input type="number"
                       ng-model="numberValue"
                       ng-change="onNumberChange()"
                       min="0"
                       max="100"
                       data-testid="number-input">
                <div class="state-display">Value: {{numberValue}} (type: {{getType(numberValue)}})</div>
            </div>
            <div class="component">
                <label>Range: {{rangeValue}}</label>
                <input type="range"
                       ng-model="rangeValue"
                       ng-change="onRangeChange()"
                       min="0"
                       max="100"
                       data-testid="range-input">
                <div class="state-display">Value: {{rangeValue}}</div>
            </div>
        </div>
    </section>

    <!-- Form Submit -->
    <section>
        <h2>6. Form Submit</h2>
        <form name="submitForm" ng-submit="onSubmit()" novalidate>
            <div class="component-row">
                <div class="component">
                    <label>First Name</label>
                    <input type="text"
                           name="firstName"
                           ng-model="formData.firstName"
                           required
                           placeholder="First name..."
                           data-testid="form-firstname">
                </div>
                <div class="component">
                    <label>Last Name</label>
                    <input type="text"
                           name="lastName"
                           ng-model="formData.lastName"
                           required
                           placeholder="Last name..."
                           data-testid="form-lastname">
                </div>
                <div class="component">
                    <label>Email</label>
                    <input type="email"
                           name="email"
                           ng-model="formData.email"
                           required
                           placeholder="Email..."
                           data-testid="form-email">
                </div>
            </div>
            <button type="submit" ng-disabled="submitForm.$invalid" data-testid="form-submit">Submit</button>
            <span class="success" ng-show="formSubmitted" style="margin-left: 10px;">Submitted!</span>
            <div class="state-display">Form Data: {{formData | json}}</div>
            <div class="state-display">Form Valid: {{submitForm.$valid}}</div>
        </form>
    </section>

    <!-- ng-model-options -->
    <section>
        <h2>7. ng-model-options</h2>
        <div class="component-row">
            <div class="component">
                <label>Debounce (500ms)</label>
                <input type="text"
                       ng-model="debounceValue"
                       ng-model-options="{ debounce: 500 }"
                       ng-change="onDebounceChange()"
                       placeholder="Updates after 500ms..."
                       data-testid="ngmodel-debounce">
                <div class="state-display">Debounced: "{{debounceValue}}"</div>
            </div>
            <div class="component">
                <label>Update on blur</label>
                <input type="text"
                       ng-model="blurValue"
                       ng-model-options="{ updateOn: 'blur' }"
                       ng-change="onBlurChange()"
                       placeholder="Updates on blur..."
                       data-testid="ngmodel-blur">
                <div class="state-display">Value: "{{blurValue}}"</div>
            </div>
        </div>
    </section>

    <script>
        angular.module('testApp', [])
            .controller('MainController', ['$scope', function($scope) {
                // Event log
                $scope.logs = [];
                const addLog = (message) => {
                    const time = new Date().toLocaleTimeString();
                    $scope.logs.push(`[${time}] ${message}`);
                    setTimeout(() => {
                        const logEl = document.querySelector('.event-log');
                        if (logEl) logEl.scrollTop = logEl.scrollHeight;
                    }, 0);
                };

                $scope.clearLogs = () => { $scope.logs = []; };

                // Basic values
                $scope.basicValue = '';
                $scope.trimmedValue = '';
                $scope.untrimmedValue = '';
                $scope.requiredValue = '';
                $scope.emailValue = '';
                $scope.patternValue = '';
                $scope.textareaValue = '';
                $scope.selectedValue = '';
                $scope.selectedFramework = '';
                $scope.radioValue = 'medium';
                $scope.customCheckbox = 'NO';
                $scope.numberValue = 50;
                $scope.rangeValue = 50;
                $scope.debounceValue = '';
                $scope.blurValue = '';

                $scope.checkboxes = { option1: false, option2: true, option3: false };

                $scope.frameworks = [
                    { value: 'angular', label: 'Angular' },
                    { value: 'react', label: 'React' },
                    { value: 'vue', label: 'Vue' },
                    { value: 'svelte', label: 'Svelte' }
                ];

                $scope.formData = { firstName: '', lastName: '', email: '' };
                $scope.formSubmitted = false;

                // Event handlers
                $scope.onBasicChange = () => addLog(`BasicInput: "${$scope.basicValue}"`);
                $scope.onTrimChange = () => addLog(`TrimInput: "${$scope.trimmedValue}"`);
                $scope.onUntrimChange = () => addLog(`NoTrimInput: "${$scope.untrimmedValue}"`);
                $scope.onRequiredChange = () => addLog(`RequiredInput: "${$scope.requiredValue}"`);
                $scope.onEmailChange = () => addLog(`EmailInput: "${$scope.emailValue}"`);
                $scope.onPatternChange = () => addLog(`PatternInput: "${$scope.patternValue}"`);
                $scope.onTextareaChange = () => addLog(`Textarea: ${$scope.textareaValue.length} chars`);
                $scope.onSelectChange = () => addLog(`Select: "${$scope.selectedValue}"`);
                $scope.onFrameworkChange = () => addLog(`Framework: "${$scope.selectedFramework}"`);
                $scope.onCheckboxChange = (key) => addLog(`Checkbox ${key}: ${$scope.checkboxes[key]}`);
                $scope.onRadioChange = () => addLog(`Radio: "${$scope.radioValue}"`);
                $scope.onCustomCheckboxChange = () => addLog(`CustomCheckbox: "${$scope.customCheckbox}"`);
                $scope.onNumberChange = () => addLog(`Number: ${$scope.numberValue}`);
                $scope.onRangeChange = () => addLog(`Range: ${$scope.rangeValue}`);
                $scope.onDebounceChange = () => addLog(`Debounce: "${$scope.debounceValue}"`);
                $scope.onBlurChange = () => addLog(`BlurInput: "${$scope.blurValue}"`);

                $scope.onSubmit = () => {
                    $scope.formSubmitted = true;
                    addLog(`Form submitted: ${JSON.stringify($scope.formData)}`);
                    setTimeout(() => { $scope.$apply(() => { $scope.formSubmitted = false; }); }, 2000);
                };

                $scope.getType = (val) => typeof val;

                addLog('AngularJS test page loaded');
            }]);
    </script>
</body>
</html>
